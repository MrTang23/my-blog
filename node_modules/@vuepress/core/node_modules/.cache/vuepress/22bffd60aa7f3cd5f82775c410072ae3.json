{"remainingRequest":"/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tangzongshuo/Desktop/vuepress-theme-maker/components/Toc.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tangzongshuo/Desktop/vuepress-theme-maker/components/Toc.vue","mtime":1677064857995},{"path":"/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/cache-loader/dist/cjs.js","mtime":1677065091659},{"path":"/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/babel-loader/lib/index.js","mtime":1677065091711},{"path":"/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/cache-loader/dist/cjs.js","mtime":1677065091659},{"path":"/Users/tangzongshuo/Desktop/vuepress-theme-maker/node_modules/vue-loader/lib/index.js","mtime":1677065091806}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFN0aWNrZXIgZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvU3RpY2tlci52dWUnOwpsZXQgaW5pdFRvcDsKLy8gZ2V0IG9mZnNldCB0b3AKZnVuY3Rpb24gZ2V0QWJzb2x1dGVUb3AoZG9tKSB7CiAgcmV0dXJuIGRvbSAmJiBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID8gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IDA7Cn0KZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFN0aWNrZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVJbmRleDogMCwKICAgICAgaXNTaG93OiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2aXNpYmxlKCkgewogICAgICByZXR1cm4gdGhpcy4kZnJvbnRtYXR0ZXIgJiYgdGhpcy4kZnJvbnRtYXR0ZXIudG9jICE9PSBmYWxzZSAmJiAhISh0aGlzLiRwYWdlICYmIHRoaXMuJHBhZ2UuaGVhZGVycyAmJiB0aGlzLiRwYWdlLmhlYWRlcnMubGVuZ3RoKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBhY3RpdmVJbmRleCgpIHsKICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLiRyZWZzLmNoYWlyVG9jSXRlbSB8fCBbXTsKICAgICAgY29uc3QgZG9tID0gaXRlbXNbdGhpcy5hY3RpdmVJbmRleF07CiAgICAgIGlmICghZG9tKSByZXR1cm47CiAgICAgIGNvbnN0IHJlY3QgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIGNvbnN0IHdyYXBwZXJSZWN0ID0gdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIGNvbnN0IHRvcCA9IHJlY3QudG9wIC0gd3JhcHBlclJlY3QudG9wOwogICAgICBpZiAodG9wIDwgMjApIHsKICAgICAgICB0aGlzLiRlbC5zY3JvbGxUb3AgPSB0aGlzLiRlbC5zY3JvbGxUb3AgKyB0b3AgLSAyMDsKICAgICAgfSBlbHNlIGlmICh0b3AgKyByZWN0LmhlaWdodCA+IHdyYXBwZXJSZWN0LmhlaWdodCkgewogICAgICAgIHRoaXMuJGVsLnNjcm9sbFRvcCArPSByZWN0LnRvcCAtICh3cmFwcGVyUmVjdC5oZWlnaHQgLSByZWN0LmhlaWdodCk7CiAgICAgIH0KICAgIH0sCiAgICAkcm91dGUoKSB7fQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJGV2ZW50QnVzLiRvbignRVZfVE9HR0xFX1RPQycsICgpID0+IHsKICAgICAgdGhpcy5pc1Nob3cgPSAhdGhpcy5pc1Nob3c7CiAgICB9KTsKICAgIC8vIHN5bmMgdmlzaWJsZSB0byBwYXJlbnQgY29tcG9uZW50CiAgICBjb25zdCBzeW5jVmlzaWJsZSA9ICgpID0+IHsKICAgICAgdGhpcy4kZW1pdCgndmlzaWJsZS1jaGFuZ2UnLCB0aGlzLnZpc2libGUpOwogICAgfTsKICAgIHN5bmNWaXNpYmxlKCk7CiAgICB0aGlzLiR3YXRjaCgndmlzaWJsZScsIHN5bmNWaXNpYmxlKTsKICAgIC8vIGJpbmRpbmcgZXZlbnQKICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy50cmlnZ2VyRXZ0KCksIDEwMDApOwogICAgdGhpcy5fb25TY3JvbGwgPSAoKSA9PiB0aGlzLm9uU2Nyb2xsKCk7CiAgICB0aGlzLl9vbkhhc2hDaGFuZ2UgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkpOwogICAgICBjb25zdCBpbmRleCA9ICh0aGlzLiRwYWdlLmhlYWRlcnMgfHwgW10pLmZpbmRJbmRleChoID0+IGguc2x1ZyA9PT0gaGFzaCk7CiAgICAgIGlmIChpbmRleCA+PSAwKSB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7CiAgICAgIGNvbnN0IGRvbSA9IGhhc2ggJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCk7CiAgICAgIGlmIChkb20pIHdpbmRvdy5zY3JvbGxUbygwLCBnZXRBYnNvbHV0ZVRvcChkb20pIC0gMjApOwogICAgfTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9vblNjcm9sbCk7CiAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX29uSGFzaENoYW5nZSk7CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9vblNjcm9sbCk7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX29uSGFzaENoYW5nZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblNjcm9sbCgpIHsKICAgICAgaWYgKGluaXRUb3AgPT09IHVuZGVmaW5lZCkgewogICAgICAgIGluaXRUb3AgPSBnZXRBYnNvbHV0ZVRvcCh0aGlzLiRlbCk7CiAgICAgIH0KICAgICAgLy8gdXBkYXRlIHBvc2l0aW9uCiAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsKICAgICAgY29uc3QgaGVhZGluZ3MgPSB0aGlzLiRwYWdlLmhlYWRlcnMgfHwgW107CiAgICAgIC8vIGNoYW5nZSBhY3RpdmUgdG9jIHdpdGggc2Nyb2xsaW5nCiAgICAgIGxldCBpID0gMDsKICAgICAgY29uc3QgYWRkTGluayA9IGluZGV4ID0+IHsKICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7CiAgICAgIH07CiAgICAgIGZvciAoOyBpIDwgaGVhZGluZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBkb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoZWFkaW5nc1tpXS5zbHVnKTsKICAgICAgICBjb25zdCB0b3AgPSBnZXRBYnNvbHV0ZVRvcChkb20pOwogICAgICAgIGlmICh0b3AgLSA1MCA8IHNjcm9sbFRvcCkgewogICAgICAgICAgYWRkTGluayhpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCFpKSBhZGRMaW5rKGkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdHJpZ2dlckV2dCgpIHsKICAgICAgdGhpcy5fb25TY3JvbGwoKTsKICAgICAgdGhpcy5fb25IYXNoQ2hhbmdlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Sticker","initTop","getAbsoluteTop","dom","getBoundingClientRect","top","document","body","scrollTop","documentElement","components","data","activeIndex","isShow","computed","visible","$frontmatter","toc","$page","headers","length","watch","items","$refs","chairTocItem","rect","wrapperRect","$el","height","$route","mounted","$eventBus","$on","syncVisible","$emit","$watch","setTimeout","triggerEvt","_onScroll","onScroll","_onHashChange","hash","decodeURIComponent","location","substring","index","findIndex","h","slug","getElementById","window","scrollTo","addEventListener","beforeDestroy","removeEventListener","methods","undefined","headings","i","addLink"],"sources":["/Users/tangzongshuo/Desktop/vuepress-theme-maker/components/Toc.vue"],"sourcesContent":["\nimport Sticker from '@theme/components/Sticker.vue'\nlet initTop\n// get offset top\nfunction getAbsoluteTop(dom) {\n  return dom && dom.getBoundingClientRect\n    ? dom.getBoundingClientRect().top +\n        document.body.scrollTop +\n        document.documentElement.scrollTop\n    : 0\n}\nexport default {\n  components: {\n    Sticker,\n  },\n  data() {\n    return {\n      activeIndex: 0,\n      isShow: false\n    }\n  },\n  computed: {\n    visible() {\n      return (\n        this.$frontmatter &&\n        this.$frontmatter.toc !== false &&\n        !!(this.$page && this.$page.headers && this.$page.headers.length)\n      )\n    },\n  },\n  watch: {\n    activeIndex() {\n      const items = this.$refs.chairTocItem || []\n      const dom = items[this.activeIndex]\n      if (!dom) return\n      const rect = dom.getBoundingClientRect()\n      const wrapperRect = this.$el.getBoundingClientRect()\n      const top = rect.top - wrapperRect.top\n      if (top < 20) {\n        this.$el.scrollTop = this.$el.scrollTop + top - 20\n      } else if (top + rect.height > wrapperRect.height) {\n        this.$el.scrollTop += rect.top - (wrapperRect.height - rect.height)\n      }\n    },\n    $route() {},\n  },\n  mounted() {\n    this.$eventBus.$on('EV_TOGGLE_TOC', () => {\n      this.isShow = !this.isShow;\n    })\n    // sync visible to parent component\n    const syncVisible = () => {\n      this.$emit('visible-change', this.visible)\n    }\n    syncVisible()\n    this.$watch('visible', syncVisible)\n    // binding event\n    setTimeout(() => this.triggerEvt(), 1000)\n    this._onScroll = () => this.onScroll()\n    this._onHashChange = () => {\n      const hash = decodeURIComponent(location.hash.substring(1))\n      const index = (this.$page.headers || []).findIndex(h => h.slug === hash)\n      if (index >= 0) this.activeIndex = index\n      const dom = hash && document.getElementById(hash)\n      if (dom) window.scrollTo(0, getAbsoluteTop(dom) - 20)\n    }\n    window.addEventListener('scroll', this._onScroll)\n    // window.addEventListener('hashchange', this._onHashChange);\n  },\n  beforeDestroy() {\n    window.removeEventListener('scroll', this._onScroll)\n    window.removeEventListener('hashchange', this._onHashChange)\n  },\n  methods: {\n    onScroll() {\n      if (initTop === undefined) {\n        initTop = getAbsoluteTop(this.$el)\n      }\n      // update position\n      const scrollTop =\n        document.body.scrollTop + document.documentElement.scrollTop\n      const headings = this.$page.headers || []\n      // change active toc with scrolling\n      let i = 0\n      const addLink = index => {\n        this.activeIndex = index\n      }\n      for (; i < headings.length; i++) {\n        const dom = document.getElementById(headings[i].slug)\n        const top = getAbsoluteTop(dom)\n        if (top - 50 < scrollTop) {\n          addLink(i)\n        } else {\n          if (!i) addLink(i)\n          break\n        }\n      }\n    },\n    triggerEvt() {\n      this._onScroll()\n      this._onHashChange()\n    },\n  },\n}\n"],"mappings":"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"}]}